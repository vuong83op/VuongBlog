<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>X√¢y d·ª±ng ·ª©ng d·ª•ng Web API v·ªõi ASP.NET Core | Blog C√° Nh√¢n HUTECH</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Blog Post Styles */
        body {
            background: linear-gradient(-45deg, #010409, #0d1117, #161b22, #21262d);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: #f0f6fc;
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 2rem 1rem;
            min-height: 100vh;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .blog-post {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 15px;
            border: 1px solid #bc8cff;
            box-shadow: 0 0 20px rgba(188, 140, 255, 0.3);
        }
        
        .blog-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid rgba(188, 140, 255, 0.3);
        }
        
        .blog-category {
            display: inline-block;
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }
        
        .blog-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #f0f6fc;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        
        .blog-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            color: #8b949e;
            font-size: 0.9rem;
        }
        
        .blog-content {
            line-height: 1.8;
            color: #f0f6fc;
        }
        
        .blog-content h2 {
            color: #bc8cff;
            font-size: 1.8rem;
            margin: 2rem 0 1rem 0;
            border-left: 4px solid #bc8cff;
            padding-left: 1rem;
        }
        
        .blog-content h3 {
            color: #00d4ff;
            font-size: 1.4rem;
            margin: 1.5rem 0 1rem 0;
        }
        
        .blog-content p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }
        
        .code-block {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            position: relative;
        }
        
        .code-block::before {
            content: 'C#';
            position: absolute;
            top: 0.5rem;
            right: 1rem;
            background: var(--neon-purple);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .code-block pre {
            margin: 0;
            color: #f8f8f2;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .highlight-box {
            background: rgba(188, 140, 255, 0.1);
            border: 1px solid #bc8cff;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .api-endpoint {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid var(--neon-cyan);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(135deg, #0d1117, #161b22);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
            border: 1px solid #bc8cff;
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(188, 140, 255, 0.3);
        }
        
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .feature-item {
            background: rgba(255, 107, 157, 0.1);
            border: 1px solid var(--neon-pink);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        
        .feature-item h4 {
            color: var(--neon-pink);
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">
            ‚Üê Quay l·∫°i trang ch·ªß
        </a>
        
        <article class="blog-post">
            <header class="blog-header">
                <div class="blog-category">Web Development</div>
                <h1 class="blog-title">X√¢y d·ª±ng ·ª©ng d·ª•ng Web API v·ªõi ASP.NET Core</h1>
                <div class="blog-meta">
                    <span>üë§ Tr·∫ßn VƒÉn V∆∞∆°ng</span>
                    <span>üìÖ 05/01/2024</span>
                    <span>‚è±Ô∏è 12 ph√∫t ƒë·ªçc</span>
                    <span>üëÅÔ∏è 1,450 l∆∞·ª£t xem</span>
                </div>
            </header>
            
            <div class="blog-content">
                <p>ASP.NET Core l√† framework hi·ªán ƒë·∫°i v√† m·∫°nh m·∫Ω ƒë·ªÉ x√¢y d·ª±ng Web API. Trong b√†i vi·∫øt n√†y, t√¥i s·∫Ω h∆∞·ªõng d·∫´n chi ti·∫øt c√°ch t·∫°o Web API t·ª´ c∆° b·∫£n ƒë·∫øn c√°c t√≠nh nƒÉng n√¢ng cao nh∆∞ authentication, validation v√† documentation.</p>
                
                <h2>1. Gi·ªõi thi·ªáu v·ªÅ ASP.NET Core Web API</h2>
                <p>ASP.NET Core Web API l√† m·ªôt framework cho ph√©p b·∫°n x√¢y d·ª±ng c√°c d·ªãch v·ª• HTTP c√≥ th·ªÉ ƒë∆∞·ª£c truy c·∫≠p t·ª´ nhi·ªÅu client kh√°c nhau nh∆∞ web applications, mobile apps, ho·∫∑c desktop applications.</p>
                
                <div class="feature-list">
                    <div class="feature-item">
                        <h4>üöÄ Hi·ªáu su·∫•t cao</h4>
                        <p>Cross-platform, lightweight v√† nhanh</p>
                    </div>
                    <div class="feature-item">
                        <h4>üîí B·∫£o m·∫≠t</h4>
                        <p>Authentication, Authorization t√≠ch h·ª£p</p>
                    </div>
                    <div class="feature-item">
                        <h4>üìö Documentation</h4>
                        <p>Swagger/OpenAPI t·ª± ƒë·ªông</p>
                    </div>
                    <div class="feature-item">
                        <h4>üîß Linh ho·∫°t</h4>
                        <p>Dependency Injection, Middleware</p>
                    </div>
                </div>
                
                <h2>2. T·∫°o project ASP.NET Core Web API</h2>
                <p>ƒê·∫ßu ti√™n, t·∫°o m·ªôt project m·ªõi:</p>
                
                <div class="code-block">
                    <pre><code># T·∫°o project m·ªõi
dotnet new webapi -n StudentManagementAPI

# Di chuy·ªÉn v√†o th∆∞ m·ª•c project
cd StudentManagementAPI

# Th√™m c√°c package c·∫ßn thi·∫øt
dotnet add package Microsoft.EntityFrameworkCore.SqlServer
dotnet add package Microsoft.EntityFrameworkCore.Tools
dotnet add package Swashbuckle.AspNetCore</code></pre>
                </div>
                
                <h2>3. C·∫•u tr√∫c project c∆° b·∫£n</h2>
                <p>D∆∞·ªõi ƒë√¢y l√† c·∫•u tr√∫c th∆∞ m·ª•c c·ªßa project:</p>
                
                <div class="code-block">
                    <pre><code>StudentManagementAPI/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îî‚îÄ‚îÄ StudentsController.cs
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îú‚îÄ‚îÄ Student.cs
‚îÇ   ‚îî‚îÄ‚îÄ StudentDto.cs
‚îú‚îÄ‚îÄ Data/
‚îÇ   ‚îî‚îÄ‚îÄ ApplicationDbContext.cs
‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îî‚îÄ‚îÄ IStudentService.cs
‚îú‚îÄ‚îÄ Program.cs
‚îî‚îÄ‚îÄ appsettings.json</code></pre>
                </div>
                
                <h2>4. T·∫°o Model v√† DTO</h2>
                <h3>4.1. Student Model</h3>
                <div class="code-block">
                    <pre><code>public class Student
{
    public int Id { get; set; }
    public string Name { get; set; } = string.Empty;
    public string Email { get; set; } = string.Empty;
    public DateTime DateOfBirth { get; set; }
    public string Major { get; set; } = string.Empty;
    public double GPA { get; set; }
    public DateTime CreatedAt { get; set; } = DateTime.Now;
    public DateTime? UpdatedAt { get; set; }
}</code></pre>
                </div>
                
                <h3>4.2. Student DTO</h3>
                <div class="code-block">
                    <pre><code>public class StudentDto
{
    public int Id { get; set; }
    public string Name { get; set; } = string.Empty;
    public string Email { get; set; } = string.Empty;
    public DateTime DateOfBirth { get; set; }
    public string Major { get; set; } = string.Empty;
    public double GPA { get; set; }
}

public class CreateStudentDto
{
    [Required]
    [StringLength(100)]
    public string Name { get; set; } = string.Empty;
    
    [Required]
    [EmailAddress]
    public string Email { get; set; } = string.Empty;
    
    [Required]
    public DateTime DateOfBirth { get; set; }
    
    [Required]
    [StringLength(50)]
    public string Major { get; set; } = string.Empty;
    
    [Range(0.0, 4.0)]
    public double GPA { get; set; }
}</code></pre>
                </div>
                
                <h2>5. C·∫•u h√¨nh Entity Framework</h2>
                <h3>5.1. ApplicationDbContext</h3>
                <div class="code-block">
                    <pre><code>public class ApplicationDbContext : DbContext
{
    public ApplicationDbContext(DbContextOptions<ApplicationDbContext> options)
        : base(options)
    {
    }
    
    public DbSet<Student> Students { get; set; }
    
    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        
        // C·∫•u h√¨nh Student entity
        modelBuilder.Entity<Student>(entity =>
        {
            entity.HasKey(e => e.Id);
            entity.Property(e => e.Name).IsRequired().HasMaxLength(100);
            entity.Property(e => e.Email).IsRequired().HasMaxLength(255);
            entity.Property(e => e.Major).IsRequired().HasMaxLength(50);
            entity.Property(e => e.GPA).HasColumnType("decimal(3,2)");
            
            // Index cho email ƒë·ªÉ t√¨m ki·∫øm nhanh
            entity.HasIndex(e => e.Email).IsUnique();
        });
    }
}</code></pre>
                </div>
                
                <h3>5.2. C·∫•u h√¨nh trong Program.cs</h3>
                <div class="code-block">
                    <pre><code>var builder = WebApplication.CreateBuilder(args);

// Add services to the container
builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();

// Entity Framework
builder.Services.AddDbContext<ApplicationDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));

// CORS
builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowAll", policy =>
    {
        policy.AllowAnyOrigin()
              .AllowAnyMethod()
              .AllowAnyHeader();
    });
});

var app = builder.Build();

// Configure the HTTP request pipeline
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseCors("AllowAll");
app.UseAuthorization();
app.MapControllers();

app.Run();</code></pre>
                </div>
                
                <h2>6. T·∫°o Controller</h2>
                <div class="code-block">
                    <pre><code>[ApiController]
[Route("api/[controller]")]
public class StudentsController : ControllerBase
{
    private readonly ApplicationDbContext _context;
    
    public StudentsController(ApplicationDbContext context)
    {
        _context = context;
    }
    
    // GET: api/students
    [HttpGet]
    public async Task<ActionResult<IEnumerable<StudentDto>>> GetStudents()
    {
        var students = await _context.Students
            .Select(s => new StudentDto
            {
                Id = s.Id,
                Name = s.Name,
                Email = s.Email,
                DateOfBirth = s.DateOfBirth,
                Major = s.Major,
                GPA = s.GPA
            })
            .ToListAsync();
            
        return Ok(students);
    }
    
    // GET: api/students/5
    [HttpGet("{id}")]
    public async Task<ActionResult<StudentDto>> GetStudent(int id)
    {
        var student = await _context.Students
            .Where(s => s.Id == id)
            .Select(s => new StudentDto
            {
                Id = s.Id,
                Name = s.Name,
                Email = s.Email,
                DateOfBirth = s.DateOfBirth,
                Major = s.Major,
                GPA = s.GPA
            })
            .FirstOrDefaultAsync();
            
        if (student == null)
        {
            return NotFound();
        }
        
        return Ok(student);
    }
    
    // POST: api/students
    [HttpPost]
    public async Task<ActionResult<StudentDto>> CreateStudent(CreateStudentDto createStudentDto)
    {
        if (!ModelState.IsValid)
        {
            return BadRequest(ModelState);
        }
        
        var student = new Student
        {
            Name = createStudentDto.Name,
            Email = createStudentDto.Email,
            DateOfBirth = createStudentDto.DateOfBirth,
            Major = createStudentDto.Major,
            GPA = createStudentDto.GPA
        };
        
        _context.Students.Add(student);
        await _context.SaveChangesAsync();
        
        var studentDto = new StudentDto
        {
            Id = student.Id,
            Name = student.Name,
            Email = student.Email,
            DateOfBirth = student.DateOfBirth,
            Major = student.Major,
            GPA = student.GPA
        };
        
        return CreatedAtAction(nameof(GetStudent), new { id = student.Id }, studentDto);
    }
    
    // PUT: api/students/5
    [HttpPut("{id}")]
    public async Task<IActionResult> UpdateStudent(int id, CreateStudentDto updateStudentDto)
    {
        if (!ModelState.IsValid)
        {
            return BadRequest(ModelState);
        }
        
        var student = await _context.Students.FindAsync(id);
        if (student == null)
        {
            return NotFound();
        }
        
        student.Name = updateStudentDto.Name;
        student.Email = updateStudentDto.Email;
        student.DateOfBirth = updateStudentDto.DateOfBirth;
        student.Major = updateStudentDto.Major;
        student.GPA = updateStudentDto.GPA;
        student.UpdatedAt = DateTime.Now;
        
        await _context.SaveChangesAsync();
        
        return NoContent();
    }
    
    // DELETE: api/students/5
    [HttpDelete("{id}")]
    public async Task<IActionResult> DeleteStudent(int id)
    {
        var student = await _context.Students.FindAsync(id);
        if (student == null)
        {
            return NotFound();
        }
        
        _context.Students.Remove(student);
        await _context.SaveChangesAsync();
        
        return NoContent();
    }
}</code></pre>
                </div>
                
                <h2>7. C·∫•u h√¨nh Swagger Documentation</h2>
                <div class="code-block">
                    <pre><code>// Trong Program.cs
builder.Services.AddSwaggerGen(c =>
{
    c.SwaggerDoc("v1", new OpenApiInfo 
    { 
        Title = "Student Management API", 
        Version = "v1",
        Description = "API ƒë·ªÉ qu·∫£n l√Ω sinh vi√™n",
        Contact = new OpenApiContact
        {
            Name = "Tr·∫ßn VƒÉn V∆∞∆°ng",
            Email = "tranvuongab23@gmail.com"
        }
    });
    
    // Include XML comments
    var xmlFile = $"{Assembly.GetExecutingAssembly().GetName().Name}.xml";
    var xmlPath = Path.Combine(AppContext.BaseDirectory, xmlFile);
    c.IncludeXmlComments(xmlPath);
});</code></pre>
                </div>
                
                <h2>8. C·∫•u h√¨nh Database</h2>
                <h3>8.1. Connection String</h3>
                <div class="code-block">
                    <pre><code>// appsettings.json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=StudentManagementDB;Trusted_Connection=true;MultipleActiveResultSets=true"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*"
}</code></pre>
                </div>
                
                <h3>8.2. Migration v√† Update Database</h3>
                <div class="code-block">
                    <pre><code># T·∫°o migration
dotnet ef migrations add InitialCreate

# C·∫≠p nh·∫≠t database
dotnet ef database update</code></pre>
                </div>
                
                <h2>9. Testing API v·ªõi Postman</h2>
                <div class="api-endpoint">
                    <h3>üì° C√°c endpoint ch√≠nh:</h3>
                    <ul>
                        <li><strong>GET</strong> /api/students - L·∫•y danh s√°ch t·∫•t c·∫£ sinh vi√™n</li>
                        <li><strong>GET</strong> /api/students/{id} - L·∫•y th√¥ng tin sinh vi√™n theo ID</li>
                        <li><strong>POST</strong> /api/students - T·∫°o sinh vi√™n m·ªõi</li>
                        <li><strong>PUT</strong> /api/students/{id} - C·∫≠p nh·∫≠t th√¥ng tin sinh vi√™n</li>
                        <li><strong>DELETE</strong> /api/students/{id} - X√≥a sinh vi√™n</li>
                    </ul>
                </div>
                
                <h2>10. Error Handling v√† Validation</h2>
                <div class="code-block">
                    <pre><code>// Global Exception Handler
public class GlobalExceptionMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger<GlobalExceptionMiddleware> _logger;
    
    public GlobalExceptionMiddleware(RequestDelegate next, ILogger<GlobalExceptionMiddleware> logger)
    {
        _next = next;
        _logger = logger;
    }
    
    public async Task InvokeAsync(HttpContext context)
    {
        try
        {
            await _next(context);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "An unhandled exception occurred");
            await HandleExceptionAsync(context, ex);
        }
    }
    
    private static async Task HandleExceptionAsync(HttpContext context, Exception exception)
    {
        context.Response.ContentType = "application/json";
        context.Response.StatusCode = 500;
        
        var response = new
        {
            error = "Internal Server Error",
            message = exception.Message,
            timestamp = DateTime.UtcNow
        };
        
        await context.Response.WriteAsync(JsonSerializer.Serialize(response));
    }
}</code></pre>
                </div>
                
                <h2>11. K·∫øt lu·∫≠n</h2>
                <p>ASP.NET Core Web API cung c·∫•p m·ªôt n·ªÅn t·∫£ng m·∫°nh m·∫Ω v√† linh ho·∫°t ƒë·ªÉ x√¢y d·ª±ng c√°c d·ªãch v·ª• web hi·ªán ƒë·∫°i. V·ªõi c√°c t√≠nh nƒÉng nh∆∞ Entity Framework, Swagger documentation, v√† middleware pipeline, b·∫°n c√≥ th·ªÉ t·∫°o ra nh·ªØng API ch·∫•t l∆∞·ª£ng cao m·ªôt c√°ch nhanh ch√≥ng.</p>
                
                <div class="highlight-box">
                    <strong>üéØ B√†i t·∫≠p th·ª±c h√†nh:</strong>
                    <ul>
                        <li>Th√™m authentication v·ªõi JWT tokens</li>
                        <li>Implement pagination cho danh s√°ch sinh vi√™n</li>
                        <li>T·∫°o API ƒë·ªÉ t√¨m ki·∫øm sinh vi√™n theo t√™n ho·∫∑c major</li>
                        <li>Th√™m logging v√† monitoring</li>
                    </ul>
                </div>
                
                <p>Trong b√†i vi·∫øt ti·∫øp theo, ch√∫ng ta s·∫Ω t√¨m hi·ªÉu v·ªÅ c√°ch t√≠ch h·ª£p authentication v√† authorization v√†o Web API. H√£y theo d√µi blog ƒë·ªÉ kh√¥ng b·ªè l·ª° nh·ªØng ki·∫øn th·ª©c b·ªï √≠ch!</p>
            </div>
        </article>
    </div>
    
    <script src="script.js"></script>
</body>
</html>
